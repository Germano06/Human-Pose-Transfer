<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>HPT Training</title>
    <script type="text/javascript">
    function insert_image(insert_div, iteration) {
        var image = document.createElement("img");
		image.src=`iteration_${iteration}.png`;
        insert_div.appendChild(image)
        var li = document.createElement("li");
        li.innerHTML = `iteration: ${iteration}`
        insert_div.appendChild(li)
    }

    function show_result(max_iteration, interval) {
        var result_images_div = document.getElementById('test_images');
        for (let index = max_iteration; index > 0; index) {
            insert_image(result_images_div, index)
            index = index - interval
        }
    }

    function show_train_info(data) {
        var info_div = document.getElementById('info');
        var p = document.createElement("p");
        p.innerText = `${JSON.stringify(data)}`
        info_div.appendChild(p)
    }

	window.onload = function (){
        fetch('data.json')
            .then(function(response) {
                return response.json();
            })
            .then(function(data_json) {
                show_result(data_json["iteration"], data_json["print_freq"])
                show_train_info(data_json)
            });
        fetch('opt.json')
            .then(function(response) {
                return response.json();
            })
            .then(function(opt_json) {
                let info_div = document.getElementById('opt');
                for(let dkey in opt_json){
                    var p = document.createElement("p");
                    p.innerText = `|\t${dkey}\t|\t${opt_json[dkey]}\t|`
                    info_div.appendChild(p)
                }
            });
	};
    </script>
</head>
<body>
    <div id="opt"></div>
    <img src="plot.svg">
    <div id="info"></div>
    <div id="test_images"></div>
</body>
</html>